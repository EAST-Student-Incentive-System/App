{% extends "layout.html" %}

{% block title %}Student History{% endblock %}
{% block page %}Student History{% endblock %}

{% block content %}
  <h2 class="text-2xl font-semibold mb-4">History for {{ history.student.username }}</h2>

  <section class="mb-8">
    <h3 class="text-xl font-semibold">Badges</h3>
    {% if history.badges %}
      <table class="striped">
        <thead><tr><th>Name</th><th>Description</th><th>Earned At</th></tr></thead>
        <tbody>
          {% for entry in history.badges %}
            <tr>
              <td>{{ entry.badge.name }}</td>
              <td>{{ entry.badge.description }}</td>
              <td>{{ entry.earnedAt }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No badges earned yet.</p>
    {% endif %}
  </section>

  <section class="mb-8">
    <h3 class="text-xl font-semibold">Events (attendance)</h3>
    {% if history.events %}
      <table class="striped">
        <thead><tr><th>Event ID</th><th>Timestamp</th></tr></thead>
        <tbody>
          {% for entry in history.events %}
            <tr>
              <td>{{ entry.eventId }}</td>
              <td>{{ entry.timestamp }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No attendance records.</p>
    {% endif %}
  </section>

  <section class="mb-8">
    <h3 class="text-xl font-semibold">Redeemed Rewards</h3>
    {% if history.rewards %}
      <table class="striped">
        <thead><tr><th>Reward</th><th>Cost</th><th>Redeemed At</th></tr></thead>
        <tbody>
          {% for entry in history.rewards %}
            <tr>
              <td>{{ entry.reward.name }}</td>
              <td>{{ entry.reward.pointCost }}</td>
              <td>{{ entry.redeemedAt }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No rewards redeemed.</p>
    {% endif %}
  </section>

  <a href="javascript:history.back()" class="btn">Go Back</a>
{% endblock %}
